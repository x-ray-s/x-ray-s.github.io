(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{374:function(e,t,_){e.exports=_.p+"assets/img/sample.c234a0e4.gif"},475:function(e,t,_){"use strict";_.r(t);var v=_(23),a=Object(v.a)({},(function(){var e=this,t=e.$createElement,v=e._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("h1",{attrs:{id:"page-title"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#page-title"}},[e._v("#")]),e._v(" "+e._s(e.$page.title))]),e._v(" "),v("h2",{attrs:{id:"剪辑版"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#剪辑版"}},[e._v("#")]),e._v(" 剪辑版")]),e._v(" "),v("p",[v("strong",[e._v("浏览器通过请求头 "),v("code",[e._v("Cache-Control")]),e._v(" 来控制是否使用缓存资源，通过 "),v("code",[e._v("ETag")]),e._v(" 来验证缓存是否可用。")])]),e._v(" "),v("p",[e._v("只要保证想要缓存的资源有这两个请求头，并且符合自己想要的策略，就可以覆盖大多数场景了。")]),e._v(" "),v("h2",{attrs:{id:"fbi-warning"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#fbi-warning"}},[e._v("#")]),e._v(" FBI WARNING")]),e._v(" "),v("p",[e._v("下面是对于一句话的简单解释：")]),e._v(" "),v("p",[e._v("对于不想缓存的资源，可以使用 "),v("em",[e._v("no-store")]),e._v(" (不存储)， "),v("em",[e._v("no-cache")]),e._v(" (不使用)")]),e._v(" "),v("p",[e._v("对于想缓存的资源，使用 "),v("em",[e._v("max-age")]),e._v(" 来控制缓存的寿命（单位秒），只要缓存在有效期内，那么获取资源就会使用缓存的副本，返回的状态为 "),v("em",[e._v("200 from disk")]),e._v(" 或 "),v("em",[e._v("200 from memory")]),e._v("，因为资源是从缓存中获取，所以并没有发起网络请求。")]),e._v(" "),v("p",[e._v("如果缓存已经过期，客户端发起请求时，会携带一个 "),v("code",[e._v("If-None-Match")]),e._v(" 的头发送给服务器，对资源的缓存进行一次检索。如果文件没有改变，那么返回 304，这样就不用把响应体发送回来了，顺便更新一下缓存的新鲜度。如果文件改动了，那么就把资源重新返回。")]),e._v(" "),v("p",[e._v("下面是废话：")]),e._v(" "),v("p",[e._v("缓存优先级 "),v("code",[e._v("Cache-Control")]),e._v(" > "),v("code",[e._v("Expires")]),e._v(" > "),v("code",[e._v("Last-Modified")])]),e._v(" "),v("p",[e._v("验证优先级 "),v("code",[e._v("ETag")]),e._v(" > "),v("code",[e._v("Last-Modified")])]),e._v(" "),v("p",[v("code",[e._v("ETag")]),e._v(" 发起 "),v("code",[e._v("If-None-Match")]),e._v("， "),v("code",[e._v("Last-Modified")]),e._v(" 发起 "),v("code",[e._v("If-Modified-Since")])]),e._v(" "),v("p",[e._v("一般情况下不会用到 "),v("code",[e._v("Cache-Control")]),e._v(" 的代理和重新验证的几个属性，遇到的时候想到就好。")]),e._v(" "),v("p",[e._v("深入的重点：")]),e._v(" "),v("p",[e._v("关于缓存验证，新鲜度，直接看下面的番号吧。对于缓存相关请求头的详细信息，请直接查阅 MDN。别人说的再多也不如自己从规范中理解和总结。")]),e._v(" "),v("p",[e._v("重中之重：")]),e._v(" "),v("p",[e._v("学知识上 "),v("strong",[e._v("MDN")]),e._v(" 和 "),v("strong",[e._v("谷歌开发者社区")]),e._v("。")]),e._v(" "),v("h2",{attrs:{id:"资源番号"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#资源番号"}},[e._v("#")]),e._v(" 资源番号")]),e._v(" "),v("ul",[v("li",[v("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Caching_FAQ",target:"_blank",rel:"noopener noreferrer"}},[e._v("HTTP 缓存 - MDN"),v("OutboundLink")],1)]),e._v(" "),v("li",[v("a",{attrs:{href:"https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching?hl=zh-CN",target:"_blank",rel:"noopener noreferrer"}},[e._v("HTTP 缓存 - 谷歌开发者社区"),v("OutboundLink")],1)])]),e._v(" "),v("h2",{attrs:{id:"自己动手-丰衣足食"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#自己动手-丰衣足食"}},[e._v("#")]),e._v(" 自己动手 丰衣足食")]),e._v(" "),v("p",[e._v("写了一个小工具，来帮助大家熟悉这几个请求头的概念")]),e._v(" "),v("p",[e._v("\b\b"),v("img",{attrs:{src:_(374),alt:"截图"}})]),e._v(" "),v("p",[e._v("Github 地址: "),v("a",{attrs:{href:"https://github.com/KennyWho/http-cache-learn",target:"_blank",rel:"noopener noreferrer"}},[e._v("http-cache-learn"),v("OutboundLink")],1)]),e._v(" "),v("p",[e._v("编码不易，感谢大家素质三连。")])])}),[],!1,null,null,null);t.default=a.exports}}]);