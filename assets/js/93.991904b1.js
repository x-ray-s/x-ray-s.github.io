(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{479:function(e,_,t){"use strict";t.r(_);var r=t(23),s=Object(r.a)({},(function(){var e=this,_=e.$createElement,t=e._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"page-title"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#page-title"}},[e._v("#")]),e._v(" "+e._s(e.$page.title))]),e._v(" "),t("p",[e._v("在 Windows 中想通过自定的 URI Scheme 打开桌面应用程序，如 "),t("code",[e._v("x-ray://")]),e._v(" 打开指定的程序，可以通过添加注册表的方式来完成。")]),e._v(" "),t("p",[e._v("过程参考 "),t("a",{attrs:{href:"https://docs.microsoft.com/en-us/previous-versions/windows/internet-explorer/ie-developer/platform-apis/aa767914(v=vs.85)?redirectedfrom=MSDN",target:"_blank",rel:"noopener noreferrer"}},[e._v("Registering an Application to a URI Scheme"),t("OutboundLink")],1)]),e._v(" "),t("h3",{attrs:{id:"手动创建注册表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#手动创建注册表"}},[e._v("#")]),e._v(" 手动创建注册表")]),e._v(" "),t("p",[e._v("我们先手动创建一个注册表，使用一个自定的 protocol 打开指定的应用程序。")]),e._v(" "),t("ol",[t("li",[t("code",[e._v("win + R")]),e._v(" 运行 "),t("code",[e._v("regedit")]),e._v(" 打开注册表")]),e._v(" "),t("li",[e._v("在 "),t("code",[e._v("HKEY_CLASSES_ROOT")]),e._v(" 下 新建 -> 项 这里我使用 "),t("code",[e._v("x-ray")]),e._v(" 作为协议名称")]),e._v(" "),t("li",[e._v("键值关系\n"),t("ul",[t("li",[e._v("(默认) : URL")]),e._v(" "),t("li",[e._v("URL Protocol : 空")])])]),e._v(" "),t("li",[e._v("以此创建子项 shell -> open -> command")]),e._v(" "),t("li",[e._v("修改 command 默认项值 为指定应用启动项。")])]),e._v(" "),t("p",[e._v("例：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe --new-window www.baidu.com\n")])])]),t("p",[e._v("这样我们在浏览器中访问 "),t("code",[e._v("x-ray://")]),e._v(" 就可以使用 Chrome 打开百度")]),e._v(" "),t("h3",{attrs:{id:"使用-nsis-脚本创建注册表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-nsis-脚本创建注册表"}},[e._v("#")]),e._v(" 使用 NSIS 脚本创建注册表")]),e._v(" "),t("p",[e._v("知道注册表的字段后，我们可以使用 NSIS 脚本自动创建注册表，模板如下")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('!macro customInstall\n  DetailPrint "Register __scheme__ URI Handler"\n  DeleteRegKey HKCR "__scheme__"\n  WriteRegStr HKCR "__scheme__" "" "URL:__scheme__"\n  WriteRegStr HKCR "__scheme__" "URL Protocol" ""\n  WriteRegStr HKCR "__scheme__\\DefaultIcon" "" "$INSTDIR\\${APP_EXECUTABLE_FILENAME}"\n  WriteRegStr HKCR "__scheme__\\shell" "" ""\n  WriteRegStr HKCR "__scheme__\\shell\\Open" "" ""\n  WriteRegStr HKCR "__scheme__\\shell\\Open\\command" "" "$INSTDIR\\${APP_EXECUTABLE_FILENAME} %1"\n!macroend\n')])])]),t("p",[e._v("使用你自己的协议名替换 "),t("code",[e._v("__scheme__")])])])}),[],!1,null,null,null);_.default=s.exports}}]);